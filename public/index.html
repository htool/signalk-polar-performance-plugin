<!DOCTYPE html>
<html>
<script type='text/javascript' src="./Chart.min.js"></script>
<script type='text/javascript' src='/jquery/dist/jquery.min.js'></script>
<title>Polar performance</title>
<body>

<canvas id="myChart" style="width:100%;max-width:1200px"></canvas>

<script>
$.getJSON("/plugins/signalk-polar-performance-plugin/chartData", function(json) {
  showChart(json)
})

function showChart (data) {
  console.log(data)
  new Chart("myChart", {
    type: "scatter",
    data: data,
    options: {
      legend: {display: true},
      spanGaps: true,
      scales: {
        x: {
          type: 'linear'
        },
        xAxes: [{
          scaleLabel: {
            display: true,
            labelString: 'True wind angle (TWA)'
          }
        }],
        yAxes: [{
          scaleLabel: {
            display: true,
            labelString: 'Target boat speed (POL SPD)'
          }
        }],
      },
      tooltips: {
        enabled: true,
        callbacks: {
          label: function (tooltipItems, data) {
            console.log("tooltipItems: " + JSON.stringify(tooltipItems))
            console.log("data: " + data)
            let label = tooltipItems.xLabel + "Â° " + tooltipItems.yLabel + " kts"
            return label
          }
        },
        backgroundColor: '#ddd',
        titleFontSize: 16,
        titleFontColor: '#0066ff',
        bodyFontColor: '#333',
        bodyFontSize: 16,
        displayColors: false
      }
    }
  })
}
</script>

